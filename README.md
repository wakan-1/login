# نظام تسجيل الحضور والانصراف

نظام بسيط وفعال لتسجيل الحضور والانصراف مع تتبع الموقع الجغرافي وإمكانية التصدير.

## الميزات

### للموظفين
- تسجيل الحضور والانصراف بناءً على الموقع الجغرافي (50 متر)
- عرض سجل الحضور الشخصي
- تصدير التقارير بصيغة Excel و PDF
- واجهة مستخدم سهلة ومتجاوبة

### للإدارة
- إضافة وتعديل وحذف المستخدمين
- عرض سجل حضور جميع الموظفين
- تصدير التقارير الشاملة
- إحصائيات مفصلة

## متطلبات التشغيل

1. **Supabase Account**: إنشاء حساب في [Supabase](https://supabase.com)
2. **Web Server**: أي خادم ويب (Apache, Nginx, أو استضافة مجانية)
3. **Modern Web Browser**: مع دعم Geolocation API

## طريقة التثبيت

### 1. إعداد قاعدة البيانات

1. إنشاء مشروع جديد في Supabase
2. نسخ URL والـ Anon Key من إعدادات المشروع
3. تشغيل SQL Scripts بالترتيب:
   - أولاً: `supabase/migrations/20250920072601_polished_lagoon.sql`
   - ثانياً: `supabase/migrations/fix_user_creation_policy.sql`
4. **إعداد إضافي لتجنب تأخير التسجيل:**
   - اذهب إلى Authentication > Settings في لوحة تحكم Supabase
   - في قسم "Rate limits"، قم بزيادة قيمة "Sign up rate limit" أو تعطيلها مؤقتاً للاختبار
   - أو انتظر 47 ثانية بين كل عملية تسجيل

### 2. إعداد الملفات

1. تحديث ملف `config.js` بالمعلومات الصحيحة:
   ```javascript
   const SUPABASE_URL = 'https://your-project.supabase.co';
   const SUPABASE_ANON_KEY = 'your-anon-key-here';
   ```

2. تحديث إحداثيات المكتب في `config.js`:
   ```javascript
   const OFFICE_LOCATION = {
       latitude: 24.7136,  // خط العرض
       longitude: 46.6753, // خط الطول
       radius: 50,         // النطاق بالأمتار
       name: 'المكتب الرئيسي'
   };
   ```

### 3. رفع الملفات

1. رفع جميع الملفات إلى الخادم
2. التأكد من أن الملفات قابلة للوصول عبر المتصفح

## طريقة الاستخدام

### للموظفين
1. سجل دخول بإنشاء حساب جديد واختر "موظف"
2. اضغط "تسجيل الحضور" عند الوصول للمكتب
3. اضغط "تسجيل الانصراف" عند المغادرة
4. راجع سجل الحضور وصدر التقارير عند الحاجة

### للإدارة
1. سجل دخول بإنشاء حساب جديد واختر "مدير"
2. أضف المستخدمين الجدد من تبويب "إدارة المستخدمين"
3. راقب حضور الموظفين من تبويب "سجل الحضور"
4. صدر التقارير الشاملة

## الملفات المطلوبة

- `index.html` - الصفحة الرئيسية
- `styles.css` - ملف التنسيق
- `app.js` - منطق التطبيق
- `config.js` - إعدادات التطبيق
- `README.md` - دليل الاستخدام

## المكتبات المستخدمة

- **Supabase JS**: للتعامل مع قاعدة البيانات
- **Font Awesome**: للأيقونات
- **SheetJS**: لتصدير Excel
- **jsPDF**: لتصدير PDF

## الأمان

- تشفير كلمات المرور
- Row Level Security في Supabase
- تتبع الموقع الجغرافي
- صلاحيات منفصلة للمستخدمين والإدارة

## الدعم

للحصول على المساعدة أو الإبلاغ عن مشاكل، يرجى التواصل مع المطور.

## الترخيص

هذا المشروع مرخص تحت MIT License.